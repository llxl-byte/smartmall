<!-- Generated by SpecStory -->

# XML File Integration in Spring Boot (2025-05-05 16:48:30)

_**User**_

å¸®æˆ‘å°†è¿™ä¸¤ä¸ªxmlæ–‡ä»¶éƒ½æ•´åˆåœ¨smart_mall_li_cr_springboot2\src\main\resources\com\example\smart_mall_li_cr_springboot2\mapperã€‚æ³¨æ„å¯èƒ½å¼•èµ·å…¶ä»–ç›¸å…³ä»£ç å¯èƒ½ä¹Ÿè¦ä¿®æ”¹ï¼Œå°½é‡åœ¨åŸæœ‰ä»£ç ä¸Šè¿›è¡Œæ”¹åŠ¨ï¼Œä¸è¦å¤§å¹…ä¿®æ”¹åŸæœ‰ä»£ç å’Œæ³¨é‡Šã€‚è¯·è¯¦ç»†è®²è§£æ¯ä¸ªçŸ¥è¯†ç‚¹

---

_**Assistant**_

æˆ‘æ¥å¸®ä½ æ•´åˆè¿™ä¸¤ä¸ªXMLæ–‡ä»¶ã€‚ä»æ–‡ä»¶è·¯å¾„çœ‹ï¼Œå­˜åœ¨ä¸¤ä¸ªä¸åŒä½ç½®çš„MallUserMapper.xmlæ–‡ä»¶ï¼š
1. smart_mall_li_cr_springboot2/src/main/resources/mapper/MallUserMapper.xml
2. smart_mall_li_cr_springboot2/src/main/resources/com/example/smart_mall_li_cr_springboot2/mapper/MallUserMapper.xml

éœ€è¦å°†ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¸­çš„ç‹¬æœ‰æ–¹æ³•æ•´åˆåˆ°ç¬¬äºŒä¸ªæ–‡ä»¶ä¸­ã€‚

é¦–å…ˆçœ‹çœ‹ä¸¤ä¸ªæ–‡ä»¶ä¸­ç›¸åŒå’Œä¸åŒçš„éƒ¨åˆ†ï¼š
- ç¬¬äºŒä¸ªæ–‡ä»¶åŒ…å«æ›´å®Œæ•´çš„åŸºç¡€CRUDæ“ä½œ
- ç¬¬ä¸€ä¸ªæ–‡ä»¶åŒ…å«ä¸€äº›ç‰¹å®šä¸šåŠ¡æ–¹æ³•(mallUserRegisterã€mallUserLoginã€updateUserAvatarã€updateUserInfo)

è®©æˆ‘å…ˆæ£€æŸ¥ä¸¤ä¸ªä½ç½®çš„æ–‡ä»¶ç»“æ„ï¼š

---

<details>
            <summary>Listed directory smart_mall_li_cr_springboot2/src/main/resources/mapper â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `MallUserMapper.xml` |

</details>

---

<details>
            <summary>Listed directory smart_mall_li_cr_springboot2/src/main/resources/com/example/smart_mall_li_cr_springboot2/mapper â€¢ **16** results</summary>
        
| Name |
|-------|
| ğŸ“„ `MallOrderMapper.xml` |
| ğŸ“„ `OrderDetailMapper.xml` |
| ğŸ“„ `CommentMapper.xml` |
| ğŸ“„ `FaqMapper.xml` |
| ğŸ“„ `ChatMessageMapper.xml` |
| ğŸ“„ `ItemMapper.xml` |
| ğŸ“„ `UserBehaviorMapper.xml` |
| ğŸ“„ `OrderMapper.xml` |
| ğŸ“„ `UserAddressMapper.xml` |
| ğŸ“„ `CouponMapper.xml` |
| ğŸ“„ `MallUserMapper.xml` |
| ğŸ“„ `ComboMapper.xml` |
| ğŸ“„ `ComboItemMapper.xml` |
| ğŸ“„ `CartMapper.xml` |
| ğŸ“„ `CategoryMapper.xml` |
| ğŸ“„ `AdminMapper.xml` |

</details>

---

ç°åœ¨æˆ‘éœ€è¦æŸ¥çœ‹mapperæ¥å£æ–‡ä»¶ï¼Œç¡®ä¿æ•´åˆåçš„XMLèƒ½ä¸æ¥å£æ­£ç¡®åŒ¹é…ï¼š

---

<details>
            <summary>Searched codebase "MallUserMapper.java" â€¢ **3** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |
| `undefined` |

</details>

---

è®©æˆ‘æŸ¥çœ‹MallUserMapperæ¥å£çš„å†…å®¹ï¼š

---

Read file: smart_mall_li_cr_springboot2/src/main/java/com/example/smart_mall_li_cr_springboot2/mapper/MallUserMapper.java

---

ç°åœ¨æˆ‘éœ€è¦æŸ¥çœ‹ç”¨äºæ³¨å†Œå’Œç™»å½•çš„å‚æ•°ç±»ï¼š

---

<details>
            <summary>Searched codebase "MallUserRegisterParam.java" â€¢ **1** results</summary>
        
| File |
|------|
| `undefined` |

</details>

---

Read file: smart_mall_li_cr_springboot2/src/main/java/com/example/smart_mall_li_cr_springboot2/pojo/MallUserRegisterParam.java

---

<details>
            <summary>Searched codebase "MallUserLoginParam.java" â€¢ **1** results</summary>
        
| File |
|------|
| `undefined` |

</details>

---

Read file: smart_mall_li_cr_springboot2/src/main/java/com/example/smart_mall_li_cr_springboot2/pojo/MallUserLoginParam.java

---

ç°åœ¨æˆ‘éœ€è¦æ•´åˆè¿™ä¸¤ä¸ªXMLæ–‡ä»¶ï¼Œåˆå¹¶åˆ°æ ‡å‡†ä½ç½®ï¼ˆcom/example/smart_mall_li_cr_springboot2/mapper/MallUserMapper.xmlï¼‰ï¼š

---

```diff
          where   id = #{id} 
      </update>
+ 
+     <select id="mallUserLogin" resultMap="BaseResultMap">
+         SELECT <include refid="Base_Column_List" /> FROM mall_user
+         WHERE username = #{username} AND password = #{password}
+     </select>
+ 
+     <select id="selectAll" resultMap="BaseResultMap">
+         select <include refid="Base_Column_List" /> from mall_user
+     </select>
+ 
+     <insert id="mallUserRegister" parameterType="com.example.smart_mall_li_cr_springboot2.pojo.MallUserRegisterParam">
+         INSERT INTO mall_user (username, password, phone, nickname)
+         VALUES (#{username}, #{password}, #{phone}, #{nickname})
+     </insert>
+ 
+     <update id="updateUserAvatar">
+         UPDATE mall_user
+         SET avatar = #{avatarUrl}
+         WHERE id = #{userId}
+     </update>
+ 
+     <update id="updateUserInfo" parameterType="com.example.smart_mall_li_cr_springboot2.pojo.MallUser">
+         UPDATE mall_user
+         SET nickname = #{nickname},
+             phone = #{phone}
+         WHERE id = #{id}
+     </update>
  </mapper>
  
```

---

ç°åœ¨æˆ‘éœ€è¦æ£€æŸ¥MallUserRegisterParamç±»æ˜¯å¦åŒ…å«phoneå’Œnicknameå­—æ®µï¼Œå› ä¸ºåœ¨XMLæ–‡ä»¶ä¸­æˆ‘ä»¬ä½¿ç”¨äº†è¿™äº›å­—æ®µï¼š

---

```diff
      private String username;
      private String password;
+     private String phone;
+     private String nickname;
  
      public String getUsername() {
```

```diff
          this.password = password;
      }
+     
+     public String getPhone() {
+         return phone;
+     }
+ 
+     public void setPhone(String phone) {
+         this.phone = phone;
+     }
+ 
+     public String getNickname() {
+         return nickname;
+     }
+ 
+     public void setNickname(String nickname) {
+         this.nickname = nickname;
+     }
  }
  
```

---

ç°åœ¨æˆ‘ä»¬éœ€è¦åˆ é™¤æ—§çš„XMLæ–‡ä»¶ï¼Œä»¥é¿å…MyBatisåœ¨åŠ è½½æ—¶å‡ºç°é‡å¤æ˜ å°„çš„é—®é¢˜ï¼š

---

åˆ é™¤æ—§çš„XMLæ–‡ä»¶ï¼Œé¿å…MyBatisåŠ è½½é‡å¤çš„Mapperæ˜ å°„

---

æœ€åï¼Œéœ€è¦ç¡®ä¿MyBatisé…ç½®æ­£ç¡®ï¼Œè®©æˆ‘ä»¬æ£€æŸ¥ä¸€ä¸‹application.ymlæˆ–application.propertiesæ–‡ä»¶ï¼š

---

<details>
            <summary>Searched codebase "application.yml" â€¢ **1** results</summary>
        
| File |
|------|
| `undefined` |

</details>

---

Read file: smart_mall_li_cr_springboot2/src/main/resources/application.yml

---

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°MyBatisçš„é…ç½®å¦‚ä¸‹ï¼š
```yaml
mybatis:
  mapper-locations: classpath:com/example/smart_mall_li_cr_springboot2/mapper/*.xml
```

è¿™è¡¨æ˜MyBatiså·²ç»æ­£ç¡®é…ç½®ä¸ºåŠ è½½æˆ‘ä»¬åˆšæ‰æ•´åˆçš„mapperæ–‡ä»¶ä½ç½®ï¼Œä¸éœ€è¦ä¿®æ”¹ã€‚

è®©æˆ‘ä»¬æ€»ç»“ä¸€ä¸‹æˆ‘ä»¬æ‰€åšçš„å·¥ä½œï¼š

1. **æ•´åˆXMLæ–‡ä»¶**ï¼šå°†`mapper/MallUserMapper.xml`ä¸­çš„ç‰¹å®šæ–¹æ³•ï¼ˆmallUserRegisterã€mallUserLoginã€updateUserAvatarã€updateUserInfoï¼‰æ•´åˆåˆ°äº†`com/example/smart_mall_li_cr_springboot2/mapper/MallUserMapper.xml`ä¸­ã€‚

2. **æ›´æ–°å‚æ•°ç±»**ï¼šåœ¨`MallUserRegisterParam`ç±»ä¸­æ·»åŠ äº†ç¼ºå°‘çš„`phone`å’Œ`nickname`å­—æ®µï¼Œä»¥åŒ¹é…XMLä¸­çš„SQLè¯­å¥ã€‚

3. **åˆ é™¤å†—ä½™æ–‡ä»¶**ï¼šåˆ é™¤äº†æ—§çš„`mapper/MallUserMapper.xml`æ–‡ä»¶ï¼Œé¿å…MyBatisåŠ è½½é‡å¤çš„Mapperæ˜ å°„ã€‚

4. **éªŒè¯é…ç½®**ï¼šç¡®è®¤äº†MyBatisé…ç½®æŒ‡å‘æ­£ç¡®çš„Mapper XMLæ–‡ä»¶ä½ç½®ã€‚

### çŸ¥è¯†ç‚¹è§£æ

1. **MyBatisæ˜ å°„æ–‡ä»¶ä½ç½®**ï¼š
   - MyBatisæ˜ å°„æ–‡ä»¶ï¼ˆXMLï¼‰é€šå¸¸éµå¾ªä¸æ¥å£ç›¸åŒçš„åŒ…è·¯å¾„ç»“æ„ï¼Œæ”¾åœ¨`resources`ç›®å½•ä¸‹å¯¹åº”çš„åŒ…è·¯å¾„ä¸­
   - ä¾‹å¦‚ï¼šæ¥å£åœ¨`java/com/example/.../mapper`ï¼Œåˆ™XMLåº”åœ¨`resources/com/example/.../mapper`ä¸‹

2. **MyBatis XMLç»“æ„**ï¼š
   - `<mapper>`ï¼šæ ¹å…ƒç´ ï¼Œé€šè¿‡namespaceå±æ€§ä¸å¯¹åº”çš„Mapperæ¥å£å…³è”
   - `<resultMap>`ï¼šå®šä¹‰ç»“æœé›†æ˜ å°„ï¼Œå°†æ•°æ®åº“åˆ—ä¸Javaå¯¹è±¡å±æ€§å¯¹åº”èµ·æ¥
   - `<sql>`ï¼šå®šä¹‰å¯é‡ç”¨çš„SQLç‰‡æ®µï¼Œå¦‚åˆ—ååˆ—è¡¨
   - å„ç§æ“ä½œæ ‡ç­¾ï¼š`<select>`ã€`<insert>`ã€`<update>`ã€`<delete>`ç”¨äºå®šä¹‰SQLæ“ä½œ

3. **å‚æ•°ä¼ é€’**ï¼š
   - å•ä¸ªå‚æ•°ï¼šå¯ç›´æ¥ä½¿ç”¨`#{å‚æ•°å}`
   - å¤šä¸ªå‚æ•°ï¼šå¯ä½¿ç”¨`@Param`æ³¨è§£æŒ‡å®šå‚æ•°åï¼Œå¦‚`@Param("userId") Integer userId`
   - JavaBeanå‚æ•°ï¼šå¯ç›´æ¥ä½¿ç”¨å±æ€§åï¼Œå¦‚`#{username}`

4. **ç»“æœæ˜ å°„**ï¼š
   - `resultType`ï¼šç®€å•æ˜ å°„ï¼Œç›´æ¥æŒ‡å®šç»“æœç±»å‹
   - `resultMap`ï¼šå¤æ‚æ˜ å°„ï¼Œå¯å¤„ç†ä¸€å¯¹å¤šã€å¤šå¯¹å¤šç­‰å…³ç³»ï¼Œé€šè¿‡`<id>`å’Œ`<result>`æ ‡ç­¾å®šä¹‰

5. **åŠ¨æ€SQL**ï¼š
   - `<if>`ï¼šæ¡ä»¶åˆ¤æ–­
   - `<trim>`ã€`<where>`ã€`<set>`ï¼šå¤„ç†SQLç‰‡æ®µçš„å‰ç¼€ã€åç¼€
   - `<foreach>`ï¼šå¾ªç¯å¤„ç†é›†åˆ
   - `<choose>`ã€`<when>`ã€`<otherwise>`ï¼šç±»ä¼¼switch-caseç»“æ„

6. **é¡¹ç›®ç»„ç»‡ç»“æ„**ï¼š
   - Mapperæ¥å£ï¼šå®šä¹‰æ•°æ®åº“æ“ä½œæ–¹æ³•
   - XMLæ˜ å°„æ–‡ä»¶ï¼šå®ç°æ¥å£å®šä¹‰çš„æ–¹æ³•
   - POJOç±»ï¼šå®šä¹‰æ•°æ®åº“è¡¨å¯¹åº”çš„å®ä½“
   - å‚æ•°ç±»ï¼šå°è£…ç‰¹å®šæ“ä½œçš„å‚æ•°ï¼Œå¦‚æ³¨å†Œã€ç™»å½•

7. **é…ç½®æ–‡ä»¶**ï¼š
   - åœ¨`application.yml`ä¸­ï¼Œé€šè¿‡`mybatis.mapper-locations`æŒ‡å®šMyBatisæŸ¥æ‰¾æ˜ å°„æ–‡ä»¶çš„ä½ç½®

è¿™æ¬¡æ•´åˆç¡®ä¿äº†æ‰€æœ‰ç”¨æˆ·ç›¸å…³çš„æ•°æ®åº“æ“ä½œéƒ½åœ¨å•ä¸€çš„XMLæ–‡ä»¶ä¸­ï¼Œé¿å…äº†é‡å¤å®šä¹‰å’Œå¯èƒ½çš„å†²çªï¼ŒåŒæ—¶ä¿ç•™äº†æ‰€æœ‰åŸæœ‰åŠŸèƒ½ã€‚è¿™ç§æ–¹å¼éµå¾ªäº†Spring Booté¡¹ç›®çš„æœ€ä½³å®è·µï¼Œä½¿ä»£ç æ›´åŠ æ¸…æ™°å’Œæ˜“äºç»´æŠ¤ã€‚

---

